"use client";

import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";
import Image from "next/image";
import { sectionVariants } from "@/lib/utils";



const slides = [
  {
    title: "Mission",
    text: "Creating lasting social impact and delivering an integrated experience by delivering distinguished services through professional asset management, innovative endowment products, enhancing financial empowerment for minors, and fostering institutional excellence in the Emirate of Abu Dhabi.",
    image: "/images/card.png",
  },
  {
    title: "Vision",
    text: "Managing endowments and entrusted wealth to achieve sustainable economic and social impact",
    image: "/images/banner-2.png",
  },
];

export default function MissionSlider() {
  const [current, setCurrent] = useState(0);

  const nextSlide = () => {
    setCurrent((prev) => (prev + 1) % slides.length);
  };

  const prevSlide = () => {
    setCurrent((prev) => (prev - 1 + slides.length) % slides.length);
  };

  const activeSlide = slides[current];

  // Masked reveal animation for words
  const revealVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: (i: number) => ({
      opacity: 1,
      y: 0,
      transition: { delay: i * 0.03, duration: 0.4, ease: "easeOut" },
    }),
  };

  return (
    <motion.section
      className="relative overflow-hidden"
      initial="hidden"
      whileInView="visible"
      viewport={{ once: true, amount: 0.5 }}
      variants={sectionVariants}
    >
      <div className="mx-auto pb-16 sm:pb-10 lg:pb-30 px-4 lg:px-35">
        <motion.div
          key={current}
          initial={{ opacity: 0, y: 20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.5 }}
          className="border border-[#B29C78]  grid grid-cols-1 md:grid-cols-2 min-h-[573px]"
        >
          {/* LEFT TEXT SIDE */}
          <div className="flex flex-col justify-between p-10 ">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="83"
              height="67"
              viewBox="0 0 83 67"
              fill="none"
            >
              <path
                d="M78.2737 1.13104C78.5759 3.19913 77.8615 7.44088 74.6901 11.1939C74.1445 11.839 69.3168 17.0307 68.2805 18.0628C65.5016 20.8229 64.8972 19.7634 64.9639 17.5311C65.0463 14.9626 65.219 12.2925 66.7184 10.9867C67.1266 10.6349 67.9273 9.91555 68.3433 9.57543C74.2348 4.74727 76.1895 2.1084 76.9274 0.787008C77.8458 -0.862776 78.1834 0.4938 78.2737 1.13495V1.13104Z"
                fill="#3AA4AF"
              />
              <path
                d="M74.2858 24.5095C77.5397 21.0027 78.0342 15.6663 77.7006 12.7968C77.4887 10.9711 76.1385 12.9571 75.4791 13.9032C72.8925 17.6093 69.5483 20.776 68.7319 21.4914C66.4947 23.4461 65.5762 24.5095 65.1562 25.9482C64.8658 27.1835 64.3673 29.107 64.124 30.2798C63.963 31.1125 64.1083 31.8084 65.9138 30.7607C68.1746 29.4471 72.5785 26.3469 74.2898 24.5056L74.2858 24.5095Z"
                fill="#3AA4AF"
              />
              <path
                d="M57.5888 33.4348C59.0607 32.4379 59.4375 30.7647 59.5199 30.5262C60.0223 29.0836 60.3206 26.5346 60.3245 26.5112C60.4501 25.4635 58.2639 26.3157 57.2983 26.7575C50.7867 29.7052 45.0522 28.6301 44.5734 30.878C44.4792 31.3276 44.0278 34.248 43.8983 34.936C43.8002 35.4169 43.6353 36.7187 45.6528 36.4451C48.0156 36.1206 54.6332 35.4404 57.5888 33.4348Z"
                fill="#3AA4AF"
              />
              <path
                d="M39.883 31.8396C40.0165 31.2415 40.2166 30.6473 38.2894 30.444C37.7242 30.3853 35.118 30.1703 33.6187 29.9318C31.5266 29.6269 28.9479 29.0639 28.9008 30.3814C28.9008 30.3814 28.8144 33.5402 29.1598 34.6818C29.2109 34.8538 29.4503 35.0337 29.7093 35.1158C36.4408 36.8945 38.7016 36.9923 39.1451 35.0376C39.5258 33.3643 39.624 33.0242 39.8869 31.8435L39.883 31.8396Z"
                fill="#3AA4AF"
              />
              <path
                d="M24.6107 33.9977C24.9012 34.0602 24.909 33.9156 24.8737 33.6497C24.6735 32.1407 24.4498 30.8271 24.3242 29.7207C24.0495 27.2617 21.5139 26.7652 20.9919 26.6323C17.7773 25.8113 14.3703 25.049 13.4558 24.8457C11.4187 24.3883 11.7445 25.5728 12.4549 26.5463C14.229 28.974 14.5666 29.8185 16.902 31.5504C18.8056 32.9617 24.6107 33.9977 24.6107 33.9977Z"
                fill="#3AA4AF"
              />
              <path
                d="M71.1458 36.1831C73.5087 33.638 74.4507 30.4128 74.9295 29.1461C75.4319 27.8208 75.2043 27.3126 73.5911 28.6496C72.7394 29.3572 71.868 29.885 71.0791 30.444C65.6783 34.2909 61.5727 34.5138 59.9124 38.7399C58.782 41.6133 57.8596 43.5915 60.1793 42.966C60.3952 42.9073 66.3691 41.3279 71.1419 36.187L71.1458 36.1831Z"
                fill="#3AA4AF"
              />
              <path
                d="M56.0384 38.6734C56.1208 38.4818 56.3917 37.6725 55.6537 37.8563C51.2106 38.9666 50.0841 39.1464 45.2799 39.6351C43.1054 39.8579 42.395 40.1824 42.1713 40.9017C41.8102 42.0746 42.3479 43.8416 43.0426 45.292C43.2036 45.6283 43.4508 45.9957 44.0396 46.0114C52.502 46.2811 53.3301 45.3624 54.1544 43.2279C54.5979 42.0785 55.3319 40.198 56.0384 38.6734Z"
                fill="#3AA4AF"
              />
              <path
                d="M25.066 38.4037C25.0032 38.2278 24.7913 38.048 24.5833 37.9854C23.0368 37.5202 21.1057 36.3317 19.0607 34.7288C18.6761 34.4239 18.3346 34.635 18.578 35.0338C20.093 37.5202 22.2204 40.0222 26.0355 42.364C26.4045 42.5868 26.7342 42.4461 26.6086 42.1411C26.6086 42.1411 25.7529 40.2763 25.07 38.3998L25.066 38.4037Z"
                fill="#3AA4AF"
              />
              <path
                d="M39.0156 47.1608C39.3217 47.1608 39.4198 46.9771 39.2746 46.7582C37.7007 44.3812 37.2218 43.7362 37.422 40.8041C37.4377 40.5891 37.1983 40.3232 36.8254 40.2763C34.3448 39.9557 31.9309 39.5374 29.5955 39.0878C29.3718 39.0409 29.2266 39.1191 29.2266 39.2794C29.309 44.0763 33.2693 47.1256 39.0195 47.1569L39.0156 47.1608Z"
                fill="#3AA4AF"
              />
              <path
                d="M66.6517 44.4164C66.7655 43.74 66.5221 43.4234 65.7489 43.5993C65.3956 43.6814 60.0341 46.0896 57.0353 47.3367C56.3799 47.6104 56.1326 47.7707 56.164 48.49C56.1875 49.0217 56.4584 52.849 58.5308 53.4315C58.8016 53.5097 59.0253 53.4355 59.1745 53.4081C62.6167 52.7435 64.2888 51.903 65.1798 51.1367C66.0982 50.3353 66.1257 49.5964 66.1767 48.6972C66.2395 47.6182 66.3534 45.8746 66.6438 44.4164H66.6517Z"
                fill="#3AA4AF"
              />
              <path
                d="M51.4971 48.8301C51.5168 48.5291 51.2224 48.4118 50.9162 48.4626C48.3885 48.8145 45.8216 48.967 43.2664 49.139C42.972 49.1585 42.9131 49.3032 43.023 49.5221C43.2978 50.0577 44.3301 52.4268 46.5163 53.5957C48.9655 54.9445 52.4941 54.9289 53.2987 54.9758C53.652 55.007 53.7815 54.7842 53.5735 54.5262C52.6158 53.3494 51.3598 50.7888 51.4971 48.8301Z"
                fill="#3AA4AF"
              />
              <path
                d="M42.1556 53.9124C41.4138 52.9038 40.723 51.8756 40.0792 50.8474C39.9654 50.6715 39.7103 50.5268 39.4512 50.4956C37.9048 50.3196 35.8598 49.5651 33.5873 48.3962C33.0888 48.1382 32.6688 48.3962 33.0064 48.7793C34.7962 50.8005 37.3867 52.7278 41.559 54.233C42.0261 54.4089 42.3832 54.2017 42.1556 53.8968V53.9124Z"
                fill="#3AA4AF"
              />
              <path
                d="M61.9809 61.8056C62.4009 61.7509 62.287 61.356 61.7886 61.1488C60.0498 60.4451 58.6996 59.499 57.1492 58.1659C56.9686 58.0095 56.6821 57.8766 56.4074 57.8766C53.3301 57.8766 49.6642 57.5873 48.259 57.1534C47.5054 56.9227 47.1796 57.3449 47.8076 57.7124C48.4827 58.1151 51.348 59.9095 54.6843 60.8908C57.8557 61.8369 59.936 62.0675 61.9809 61.8056Z"
                fill="#3AA4AF"
              />
              <path
                d="M73.7559 59.0807C71.2753 57.2198 69.7093 54.9367 69.0224 53.4668C68.8693 53.1423 68.6338 53.1618 68.3944 53.2752C66.5418 54.0454 64.5596 54.6709 62.5147 55.183C60.5325 55.6639 61.4824 57.7124 65.1091 59.7219C66.008 60.2223 69.7171 60.2223 73.7088 59.5616C73.9993 59.5147 74.015 59.2723 73.7559 59.0807Z"
                fill="#3AA4AF"
              />
              <path
                d="M82.0024 66.2818C80.0046 64.9683 78.6347 64.4327 76.107 62.9119C75.8362 62.7477 75.5183 62.7712 75.3024 62.7985C71.3578 63.3028 69.7799 63.209 66.4122 63.1504C65.9608 63.1426 65.8666 63.3576 66.1728 63.6C68.4886 65.4296 75.7695 67.7401 82.1163 66.7588C82.3792 66.7197 82.3243 66.4851 82.0024 66.2779V66.2818Z"
                fill="#3AA4AF"
              />
              <path
                d="M13.9857 18.9425C13.5657 19.3295 13.6795 20.0997 13.9033 21.3351C14.0328 22.0896 14.6294 22.6213 15.6106 22.8754C16.8156 23.1842 19.2295 23.5986 20.4895 23.841C22.3067 24.1889 22.448 23.8527 20.199 22.0427C17.95 20.2326 14.8335 18.1606 13.9818 18.9464L13.9857 18.9425Z"
                fill="#3AA4AF"
              />
              <path
                d="M11.9411 20.3069C11.9293 19.525 11.9489 18.9347 11.9411 18.4773C11.9371 18.1528 11.8429 18.0003 11.6035 17.9495C9.95882 17.5742 8.38088 17.6289 6.72051 18.2857C5.7706 18.6728 5.7235 19.0559 6.39864 19.3452C8.68705 20.3069 9.66051 22.8246 10.9362 22.8246C11.9882 22.7738 11.9607 21.5423 11.9411 20.3069Z"
                fill="#3AA4AF"
              />
              <path
                d="M6.8343 22.4101C5.37026 20.6548 4.36938 20.3225 3.54905 20.7877C2.48537 21.382 1.35889 22.7933 0.601357 23.7706C-0.332799 25.1507 -0.187573 26.0459 1.09984 26.433C1.40599 23.8645 6.33582 26.7614 9.65246 29.6895C10.669 30.5887 11.5208 30.5222 11.7445 30.3307C12.0036 30.1235 11.9722 29.7052 10.8614 27.9889C9.06763 25.221 7.93723 23.7276 6.8343 22.4062V22.4101Z"
                fill="#3AA4AF"
              />
              <path
                d="M59.4532 23.45C60.6268 22.8714 60.403 20.084 60.1597 18.2231C60.0145 17.0541 59.4532 16.9877 58.4366 17.6953C55.7009 19.5875 50.4492 22.8284 47.8901 23.8722C47.5211 24.0325 46.1042 24.5837 45.3702 25.307C44.9502 25.7214 44.8325 26.8786 46.167 26.773C49.5896 26.4994 56.1208 25.0568 59.4532 23.4539V23.45Z"
                fill="#3AA4AF"
              />
              <path
                d="M28.4337 26.433C30.6749 28.1453 37.842 28.247 39.7181 27.684C40.8525 27.3752 40.9506 26.4252 41.0134 25.7293C41.0291 25.5651 40.8446 25.4087 40.5856 25.4556C36.6763 26.1632 32.0251 26.2219 28.261 25.225C27.7272 25.0842 27.7154 25.8896 28.4298 26.4369L28.4337 26.433Z"
                fill="#3AA4AF"
              />
            </svg>

            <div>
              <motion.h2
                key={activeSlide.title}
                initial={{ y: 40, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ duration: 0.6, ease: "easeOut" }}
                className="text-[38px] font-bold text-[#B29C78] mb-6"
              >
                {activeSlide.title}
              </motion.h2>

              {/* Description words animation */}
              <div className="flex flex-wrap max-w-lg">
                {activeSlide.text.split(" ").map((word, i) => (
                  <motion.span
                    key={i}
                    custom={i}
                    initial="hidden"
                    animate="visible"
                    variants={revealVariants}
                    className="mr-1 inline-block text-gray-600 leading-7 text-[17px]"
                  >
                    {word}
                  </motion.span>
                ))}
              </div>
            </div>

            {/* Arrows */}
            <div className="flex gap-6 mt-10">
              <motion.button
                whileHover={{ scale: 1.1, rotate: -10 }}
                whileTap={{ scale: 0.9 }}
                onClick={prevSlide}
                className="border border-[#25537F] p-3"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="32"
                  height="32"
                  viewBox="0 0 32 32"
                  fill="none"
                >
                  <path
                    d="M9.29249 16.7074L19.2925 26.7074C19.3854 26.8004 19.4957 26.8741 19.6171 26.9243C19.7385 26.9746 19.8686 27.0005 20 27.0005C20.1314 27.0005 20.2615 26.9746 20.3829 26.9243C20.5043 26.8741 20.6146 26.8004 20.7075 26.7074C20.8004 26.6145 20.8741 26.5042 20.9244 26.3828C20.9747 26.2614 21.0005 26.1313 21.0005 25.9999C21.0005 25.8686 20.9747 25.7384 20.9244 25.6171C20.8741 25.4957 20.8004 25.3854 20.7075 25.2924L11.4137 15.9999L20.7075 6.70745C20.8951 6.5198 21.0005 6.26531 21.0005 5.99995C21.0005 5.73458 20.8951 5.48009 20.7075 5.29245C20.5199 5.1048 20.2654 4.99939 20 4.99939C19.7346 4.99939 19.4801 5.1048 19.2925 5.29245L9.29249 15.2924C9.19952 15.3853 9.12576 15.4956 9.07543 15.617C9.02511 15.7384 8.99921 15.8685 8.99921 15.9999C8.99921 16.1314 9.02511 16.2615 9.07543 16.3829C9.12576 16.5043 9.19952 16.6146 9.29249 16.7074Z"
                    fill="#343330"
                  />
                </svg>
              </motion.button>

              <motion.button
                whileHover={{ scale: 1.1, rotate: 10 }}
                whileTap={{ scale: 0.9 }}
                onClick={nextSlide}
                className="border border-[#25537F] p-3"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="32"
                  height="32"
                  viewBox="0 0 32 32"
                  fill="none"
                >
                  <path
                    d="M22.7075 15.2926L12.7075 5.29255C12.6146 5.19964 12.5043 5.12594 12.3829 5.07566C12.2615 5.02538 12.1314 4.9995 12 4.9995C11.8686 4.9995 11.7385 5.02538 11.6171 5.07566C11.4957 5.12594 11.3854 5.19964 11.2925 5.29255C11.1996 5.38546 11.1259 5.49576 11.0756 5.61716C11.0253 5.73855 10.9995 5.86866 10.9995 6.00005C10.9995 6.13145 11.0253 6.26156 11.0756 6.38295C11.1259 6.50434 11.1996 6.61464 11.2925 6.70755L20.5863 16.0001L11.2925 25.2926C11.1049 25.4802 10.9995 25.7347 10.9995 26.0001C10.9995 26.2654 11.1049 26.5199 11.2925 26.7076C11.4801 26.8952 11.7346 27.0006 12 27.0006C12.2654 27.0006 12.5199 26.8952 12.7075 26.7076L22.7075 16.7076C22.8005 16.6147 22.8742 16.5044 22.9246 16.383C22.9749 16.2616 23.0008 16.1315 23.0008 16.0001C23.0008 15.8686 22.9749 15.7385 22.9246 15.6171C22.8742 15.4957 22.8005 15.3854 22.7075 15.2926Z"
                    fill="#343330"
                  />
                </svg>
              </motion.button>
            </div>
          </div>

          {/* RIGHT IMAGE SIDE */}
          <AnimatePresence mode="wait">
            <motion.div
              key={activeSlide.image}
              initial={{ opacity: 0, x: 40 }}
              animate={{ opacity: 1, x: 0 }}
              exit={{ opacity: 0, x: -40 }}
              transition={{ duration: 0.6, ease: "easeOut" }}
              className="relative w-full h-full"
            >
              <Image
                src={activeSlide.image}
                fill
                alt="Mission image"
                className="object-cover w-full h-full"
              />
            </motion.div>
          </AnimatePresence>
        </motion.div>

        {/* ACTIVE SLIDE INDICATOR */}
        <div className="w-full mt-20 flex ">
          <div className="w-52 h-[3px] bg-gray-300 relative">
            <motion.div
              className="absolute top-0 h-[2px] bg-[#B29C78]"
              initial={false}
              animate={{
                width: `${((current + 1) / slides.length) * 100}%`,
              }}
              transition={{ duration: 0.5, ease: "easeOut" }}
            />
          </div>
        </div>
      </div>
    </motion.section>
  );
}
